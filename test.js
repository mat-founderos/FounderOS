function setupReCAPTCHAForm({formSelector:e,redirectFields:t=null,redirectUrl:r=null}){function a(){document.querySelectorAll(e).forEach((e=>{e.addEventListener("submit",(a=>{"true"!==e.dataset.skipCaptcha&&(a.preventDefault(),a.stopPropagation(),window.grecaptcha?grecaptcha.ready((()=>{grecaptcha.execute("6LcGI2grAAAAAN9XteKVEWbw1UK_Zle_0PDKpDaj",{action:"submit"}).then((a=>{if(!a||a.length<10)return void alert("reCAPTCHA failed");let n=e.querySelector('textarea[name="g-recaptcha-response"]');if(n||(n=document.createElement("textarea"),n.name="g-recaptcha-response",n.style.display="none",e.appendChild(n)),n.value=a,e.dataset.skipCaptcha="true",!t||!r)return void e.requestSubmit();const o=e.closest(".w-form"),c=new MutationObserver((()=>{const a=o.querySelector(".w-form-done");if(a&&null!==a.offsetParent){c.disconnect(),delete e.dataset.skipCaptcha;const a=new URLSearchParams;t.forEach((t=>{const r=e.querySelector(`#${t}`);r||console.warn(`Missing field with id #${t}`),a.append(t,r?.value||"")})),window.location.href=`${r}?${a}`}}));c.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),e.requestSubmit()})).catch((e=>{console.error("reCAPTCHA error:",e),alert("reCAPTCHA error. Please try again.")}))})):alert("reCAPTCHA not loaded"))}))}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()}